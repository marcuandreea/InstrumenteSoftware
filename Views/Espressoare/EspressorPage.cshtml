@using Microsoft.AspNetCore.Identity
@inject UserManager<mvc.Models.Users> UserManager
@model mvc.Models.Espressoare

@{
    ViewData["Title"] = "EspressorPage";
    var userId = User.Identity.IsAuthenticated ? UserManager.GetUserId(User) : "";
}

<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <title>Home - Coffee Shop</title>
    <link rel="icon" href="img/logo2.png" type="image/x-icon">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="continut">

        <iframe width="2100" height="500"
        src="@Url.Content(Model.Video)">
        </iframe>
    </div>
    <div class="prezentare">
        <img src="@Url.Content(Model.PozaStanga)" alt="pozaStanga" width="600" height="300">

        <div class="pret">
            <h2>@Model.Nume</h2>
            <h3>@Model.Cod</h3>
            <h3>In stoc: @Model.Stoc</h3>
            @{
                var oldPrice = @Model.Pret + 400;
            }
            <div class="price">@Model.Pret RON<span>@oldPrice RON</span> </div>
            @if(Model.Stoc != "0")
            {
                <form asp-controller="CosCumparaturi" asp-action="AddToCart" method="post">
                    @Html.AntiForgeryToken()
                    <input type="hidden" name="userID" value="@userId" />
                    <input type="hidden" name="IDCafea" value="" />
                    <input type="hidden" name="CodEspressor" value="@Model.id" />
                    <button type="submit" class="btn"><h2>Adauga in cos</h2></button>
                </form>
            }
            else
            {
                <a class="btn" style="pointer-events: none; opacity: 0.6; cursor: not-allowed;"><h2>Stoc epuizat</h2></a>
            }
        </div>
    </div>
    <div class="descriere">
        <div class="titlu">
            <p style="white-space: pre-line;">@Model.Descriere</p>
        </div>

        <img src="@Url.Content(Model.PozaDreapta)" alt="pozaDreapta" width="900" height="500">


    </div>

</body>
</html>                